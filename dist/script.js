var MySelect=function(){"use strict";function t(t,e){for(var n=0,i=e.length,s=t.length;n<i;n++,s++)t[s]=e[n];return t}return function(){function e(t,e){var n,i=this;if(void 0===e&&(e={placeholder:"Choose an options"}),this.clickHandler=function(t){var e=t.target;e.closest('[data-type="field"]')?i.toggle():e.closest('[data-type="option"]')&&i.optionClickHandler(e.closest('[data-type="option"]'))},this.documentClickHandler=function(t){t.target.closest('[data-type="container"]')!==i.$container&&i.close()},this.selectChangeHandler=function(){i.$input.textContent=i.getInputText()},this.selector=t,this.options=e,this.$select=document.querySelector(this.selector),this.eventChange=new Event("change"),this.eventDestroy=new Event("destroy"),this.isMobile=!!/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/.exec(window.navigator.userAgent),"select"!==(null===(n=this.$select)||void 0===n?void 0:n.tagName.toLowerCase()))throw new Error("$element is not a <select>");this.init()}return e.prototype.open=function(){this.$container.classList.add("-open")},e.prototype.close=function(){this.$container.classList.remove("-open")},e.prototype.toggle=function(){this.$container.classList.toggle("-open")},e.prototype.setValue=function(t){this.$select.querySelectorAll("option").forEach((function(e){e.selected="string"==typeof t?e.value===t:-1!==t.indexOf(e.value)})),this.isMobile||this.$container.querySelectorAll('[data-type="option"]').forEach((function(e){"string"==typeof t?e.dataset.value===t?e.classList.add("-selected"):e.classList.remove("-selected"):-1!==t.indexOf(e.dataset.value)?e.classList.add("-selected"):e.classList.remove("-selected")})),this.$input.textContent=this.getInputText(),this.$select.dispatchEvent(this.eventChange)},e.prototype.getValue=function(){if(this.$select.multiple){var t=[];return this.$container.querySelectorAll("option").forEach((function(e){e.selected&&t.push(e.value)})),t}return this.$select.value},e.prototype.destroy=function(){this.$container.outerHTML=this.$select.outerHTML,this.$container.removeEventListener("click",this.clickHandler),document.removeEventListener("click",this.documentClickHandler),this.$select.removeEventListener("change",this.selectChangeHandler),this.$select.dispatchEvent(this.eventDestroy)},e.prototype.refresh=function(){this.$select.disabled?this.$container.classList.add("-disabled"):this.$container.classList.remove("-disabled"),this.isMobile||(this.$dropdown.innerHTML=this.getDropdownOptionsHtml()),this.$input.textContent=this.getInputText()},e.prototype.init=function(){this.$select.outerHTML=this.getTemplate(),this.$select=document.querySelector(this.selector),this.$container=this.$select.closest('[data-type="container"]'),this.$input=this.$container.querySelector('[data-type="input"]'),this.$dropdown=this.$container.querySelector('[data-type="dropdown"]'),this.$select.disabled||(this.$container.addEventListener("click",this.clickHandler),document.addEventListener("click",this.documentClickHandler),this.$select.addEventListener("change",this.selectChangeHandler))},e.prototype.optionClickHandler=function(e){if(!e.classList.contains("-disabled")){var n=this.getValue();this.$select.multiple&&Array.isArray(n)?this.setValue((i=n,s=e.dataset.value,i.includes(s)?i.filter((function(t){return t!==s})):t(t([],i),[s]))):(this.setValue(e.dataset.value),this.close())}var i,s},e.prototype.getTemplate=function(){var t=this.$select.disabled?" -disabled":"",e=this.isMobile?" -mobile":"",n=this.$select.outerHTML,i=this.isMobile?"":this.getDropdownOptionsHtml();return'\n      <div class="mselect'+t+e+'" data-type="container">\n        <div class="mselect__field" data-type="field">\n          '+this.getInputHtml()+'\n          <div class="mselect__arrow">\n            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">\n              <path d="M0 0h24v24H0V0z" fill="none"/>\n              <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>\n            </svg>\n          </div>\n        </div>\n        <div class="mselect__dropdown" data-type="dropdown">\n          '+i+"\n        </div>\n        "+n+"\n      </div>\n    "},e.prototype.getDropdownOptionsHtml=function(){var t=this,e="";return this.$select.querySelectorAll("option").forEach((function(n,i){if(!n.disabled||0!==i||t.$select.multiple){var s=n.disabled?" -disabled":"",o=n.selected?" -selected":"";e+='<div\n            class="mselect__option'+(s+o)+'"\n            data-type="option"\n            data-value="'+n.value+'"\n          >\n            '+n.textContent+"  \n          </div>"}})),e},e.prototype.getInputHtml=function(){return'<div class="mselect__input" data-type="input">'+this.getInputText()+"</div>"},e.prototype.getInputText=function(){var t="";return this.$select.querySelectorAll("option").forEach((function(e){e.selected&&(t+=t?", "+e.textContent:e.textContent)})),!t&&this.$select.multiple&&(t=this.options.placeholder),t},e}()}();
